2024년 5월 현재, 프리 뛰고 있는 일과 관련있다.
코드를 모듈로서 외부에서 매개변수와 함께 실행하는 형태의 코드를 작성해야 한다.
이 코드는 변수가 없고 리턴과 출력문이 없기 때문에 정상 실행되는 코드는 아니다.
고로 이를 편리하게 사용하고자 compile과 exec를 이용하여 runner 모듈을 개발하였으며 
yaml 설정 파일을 작성하면 이를 바탕으로 스크립트 파일, 스크립트 테스트 파일의 기본 구성을 생성해 주는 generator도 개발하였다. 
여기에 더해서 심플한 웹 프로젝트를 만들고자 한다.
웹은 로컬에서만 동작하게 될 것이며 DB는 sqlite를 사용하고, 파일시스템에 파일 직접, 생성, 저장하는 등의 작업이 있을 것이다. 
웹은 이미 만들어진 generator와 runner를 이용하여 고도화 하는 형태로 만들어질 것이다.

각 기능은 마법사 스타일로 넘어가는 형태로 만들거나 
조금 무식하게 아래로 계속 스크롤 하는 형식으로 만든다. 

### 기본 정보 입력 화면
* 제목 : 스크립트 이름을 한글로 작성해 주는 것이다. 
* Script name : 프로젝트 내에서 정의된 스크립트 명을 사용한다. 
* mission id : 스크립트의 고유번호를 지정한다. 이 고유번호는 일단은 자동 생성하는 것으로 한다.
* parameters : 기본적으로 입력될 수 있는 매개변수다.
	* name : 변수명
	* value : 기본값, generator 내에서는 실질적인 입력값이다.
	* comment : 변수에 대한 설명.
	* type : generator의 특성상 변수의 타입을 알아야 한다. (number, string, bool ) - radio로 구현
* input : 스크립트에 입력되는 데이터이다. 여러 가지 방식으로 입력을 받자. radio나 탭 구성을 이용하여 textarea, file upload 등을 사용할 수 있게 하자. 입력 가능 양식은 csv, tsv, json으로 한다. auto-detect를 구현할 수 있다면 적용하자.
* output : 스크립트의 실행 결과와 자동적으로 assert 하여 unit test를 실시할 결과값이다. 

### 스크립트 편집 화면 
기본정보를 입력하면 스크립트와 스크립트 테스트 파일이 생성된다. 하지만 스크립트의 비즈니스 로직을 편집해야 하므로 스크립트 편집 화면이 있다. 
스크립트 편집기는 코드 하이라이팅이 되는 에디터라면 정말 좋을 것이다. 안되면 그냥 textarea다. 
스크립트는 기본적인 import, log 옵션과 output 필드 등이 있는 아주 심플한 코드다. 
이 스크립트를 복사해서 다른 곳에 붙여넣는 형식의 작업이므로 복사 버튼이 있어야 좋겠다.
저장 버튼이 있어야 한다. 저장하지 않고 테스트 버튼을 누른다면 자동 저장하는 것이 좋다.

### 스크립트 테스트 스크립트 화면
스크립트 테스트 스크립트도 자동으로 작성된다. 테스트 스크립트는 특별히 assert를 변경하고 보완해야 할 경우에만 수정해도 된다. dataframe의 assert가 묘하게 이상 동작하고 있는 부분이 있어 잘 조정이 필요할 것이다.
테스트 버튼을 적당한 곳에 위치 시키자. 테스트 버튼을 누르면 테스트 코드가 저장 된다.

### 테스트 결과 출력
pytest를 사용할 것이기에 pytest의 출력 결과를 capture해서 보여주거나  
test 코드 직접 실행후 결과를 그대로 리턴하는 등의 패턴도 좋다. 

### 작업 목록
기존의 작업들을 볼 수 있는 리스트 화면이다. 
여기에서 편집 화면으로 넘어갈 수 있다. 
최초 생성일, 최종 수정일이 표시되어야 한다. 
마지막 테스트 결과를 같이 표시해 주자. 

## 저장 등 로직
기본 정보는 sqlite에 저장한다. 
스크립트도 sqlite에 저장하는 쪽으로 한다. (파일로 내리는 것보다 이 쪽이 안전한 것 같다.)

1. 웹에서 정보가 post 되면 generator가 스크립트와 테스트 스크립트를 생성하여 클라이언트에게 응답 
2. 스크립트와 테스트스크립트를 저장하면 서버에 저장.
3. 테스트 명령이 떨어지면 runner를 이용, 테스트스크립트를 실행하고 테스트 스크립트가 스크립트를 실행하는 구조임.
4. 테스트 결과를 적절하게 응답.
5. 결과에 따라 수정, 테스트를 반복하거나 종료.

